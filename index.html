<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Pay Me</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#111111">
<style>
  :root { --venmo:#339AF0;--cashapp:#00C244;--paypal:#003087;--zelle:#5A31F4; }
  *{box-sizing:border-box;margin:0;padding:0;}
  html,body{width:100%;height:100%;overflow:hidden;font-family:"Segoe UI",Roboto,sans-serif;
    display:flex;align-items:center;justify-content:center;
    background:linear-gradient(-45deg,#333,#111,#333,#111);
    background-size:400% 400%;animation:bgShift 10s ease infinite;
    transition:background 2s ease;}
  @keyframes bgShift{0%{background-position:0 0;}50%{background-position:100% 100%;}100%{background-position:0 0;}}
  body.theme-venmo{animation:none;background:linear-gradient(135deg,rgba(51,154,240,0.4),rgba(51,154,240,1));}
  body.theme-cashapp{animation:none;background:linear-gradient(135deg,rgba(0,194,68,0.3),rgba(0,153,54,0.8));}
  body.theme-paypal{animation:none;background:linear-gradient(135deg,rgba(0,48,135,0.4),rgba(0,48,135,1));}
  body.theme-zelle{animation:none;background:linear-gradient(135deg,rgba(90,49,244,0.4),rgba(90,49,244,1));}

  .screen{position:absolute;top:0;left:0;width:100%;height:100%;padding:20px;
    display:flex;flex-direction:column;justify-content:center;align-items:center;
    background:rgba(255,255,255,0.9);}
  .screen.hidden{display:none;}
  h1{font-size:1.8rem;margin-bottom:20px;color:#222;}
  .methods{width:100%;max-width:360px;display:flex;flex-direction:column;gap:16px;}
  .method-btn{display:flex;align-items:center;gap:12px;padding:14px;border:none;border-radius:12px;
    background:#fff;color:#222;font-size:18px;cursor:pointer;box-shadow:0 4px 10px rgba(0,0,0,0.1);
    transition:transform .2s;}
  .method-btn:hover{transform:translateY(-2px);}
  .method-btn img{width:32px;height:32px;}

  .number-display{font-size:2rem;text-align:center;margin:10px 0;color:#222;}
  .numpad{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-bottom:20px;}
  .numpad button{padding:20px;font-size:24px;border:none;border-radius:8px;background:#ececec;cursor:pointer;
    transition:transform .1s;}
  .numpad button:active{transform:scale(0.9);}
  .actions{display:flex;gap:10px;width:100%;max-width:360px;}
  .back-btn{flex:1;padding:12px;border:none;border-radius:8px;background:#6c757d;color:#fff;font-size:18px;}
  .pay-btn{flex:1;padding:12px;border:none;border-radius:8px;color:#fff;font-size:18px;background:var(--venmo);}
  .copy-btn{width:100%;padding:14px;border:none;border-radius:8px;background:var(--zelle);color:#fff;
    font-size:18px;margin-bottom:10px;}

  #fab-install{position:fixed;bottom:20px;right:20px;width:50px;height:50px;border-radius:25px;
    background:#fff;box-shadow:0 2px 6px rgba(0,0,0,0.3);display:none;align-items:center;justify-content:center;
    cursor:pointer;opacity:0.6;transition:opacity .2s;}
  #fab-install.show{display:flex;}
  #fab-install:hover{opacity:1;}

  #success-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);
    display:flex;flex-direction:column;justify-content:center;align-items:center;color:#fff;padding:20px;
    text-align:center;opacity:0;pointer-events:none;transition:opacity .3s;}
  #success-overlay.show{opacity:1;pointer-events:auto;}
  #success-overlay button{margin-top:20px;padding:12px 20px;font-size:18px;border:none;border-radius:6px;
    background:#fff;color:#000;cursor:pointer;}
</style>
</head>
<body>
  <div id="fab-install">üíæ</div>
  <div id="success-overlay"><h1>Success!</h1>
    <p>Your payment opened. Add this to home screen for quick access.</p>
    <button id="overlay-install">Install App</button>
    <button id="overlay-close" style="margin-top:10px;background:transparent;color:#fff;">Close</button>
  </div>

  <div id="screen-method" class="screen">
    <h1>Select Payment Type</h1>
    <div class="methods">
      <button class="method-btn" data-method="venmo">
        <img src="https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/venmo.svg" alt="Venmo"/>Venmo
      </button>
      <button class="method-btn" data-method="cashapp">
        <img src="https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/cashapp.svg" alt="CashApp"/>Cash App
      </button>
      <button class="method-btn" data-method="paypal">
        <img src="https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/paypal.svg" alt="PayPal"/>PayPal
      </button>
      <button class="method-btn" data-method="zelle">
        <img src="https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/zelle.svg" alt="Zelle"/>Zelle
      </button>
    </div>
  </div>

  <div id="screen-amount" class="screen hidden">
    <h1 id="amount-title">Enter Amount</h1>
    <div class="number-display" id="display">0.00</div>
    <div class="numpad">
      <button data-key="1">1</button><button data-key="2">2</button><button data-key="3">3</button>
      <button data-key="4">4</button><button data-key="5">5</button><button data-key="6">6</button>
      <button data-key="7">7</button><button data-key="8">8</button><button data-key="9">9</button>
      <button data-key=".">.</button><button data-key="0">0</button><button data-key="‚Üê">‚Üê</button>
    </div>
    <div class="actions">
      <button class="back-btn">Back</button>
      <button class="pay-btn" id="confirm-btn">Pay</button>
    </div>
  </div>

  <div id="screen-zelle" class="screen hidden">
    <h1>Zelle</h1>
    <p style="text-align:center;margin-bottom:20px;color:#444;">
      Tap to copy email below
    </p>
    <button class="copy-btn" id="zelle-copy">Copy Email</button>
    <button class="back-btn">Back</button>
  </div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
<script>
  let deferredPrompt;
  window.addEventListener('beforeinstallprompt', e=>{
    e.preventDefault(); deferredPrompt=e;
    document.getElementById('fab-install').classList.add('show');
  });

  document.getElementById('fab-install').onclick=async()=>{
    if(!deferredPrompt)return;
    deferredPrompt.prompt();
    const c=await deferredPrompt.userChoice;
    if(c.outcome==='accepted') confetti();
    deferredPrompt=null;
    document.getElementById('fab-install').classList.remove('show');
  };

  document.getElementById('overlay-install').onclick=async()=>{
    if(!deferredPrompt)return;
    deferredPrompt.prompt();
    const c=await deferredPrompt.userChoice;
    if(c.outcome==='accepted') confetti();
    deferredPrompt=null;
    document.getElementById('success-overlay').classList.remove('show');
  };
  document.getElementById('overlay-close').onclick=()=>{
    document.getElementById('success-overlay').classList.remove('show');
  };

  if('serviceWorker' in navigator) navigator.serviceWorker.register('sw.js');

  const handles={
    venmo:{handle:'harperrc27',color:'var(--venmo)',url:amt=>`https://venmo.com/harperrc27?txn=pay&amount=${amt}`},
    cashapp:{handle:'harperrc',color:'var(--cashapp)',url:amt=>`https://cash.app/$harperrc/${amt}`},
    paypal:{handle:'harperrc',color:'var(--paypal)',url:amt=>`https://www.paypal.me/harperrc/${amt}`},
    zelle:{handle:'harperrcfinancial@gmail.com',color:'var(--zelle)'}
  };
  const body=document.body,screens={
    method:document.getElementById('screen-method'),
    amount:document.getElementById('screen-amount'),
    zelle:document.getElementById('screen-zelle')
  };
  const display=document.getElementById('display'),confirmBtn=document.getElementById('confirm-btn');
  let currentAmount='',currentMethod='';
  function show(n){Object.values(screens).forEach(s=>s.classList.add('hidden'));screens[n].classList.remove('hidden');}
  document.querySelectorAll('.method-btn').forEach(btn=>btn.addEventListener('click',()=>{
    const m=btn.dataset.method;body.className='theme-'+m;
    if(m==='zelle')show('zelle');else{currentMethod=m;currentAmount='';display.textContent='0.00';confirmBtn.style.background=handles[m].color;document.getElementById('amount-title').textContent=`Pay with ${m.charAt(0).toUpperCase()+m.slice(1)}`;show('amount');}
  }));
  document.querySelectorAll('.numpad button').forEach(btn=>btn.onclick=()=>{
    const k=btn.dataset.key;btn.style.transform='scale(0.9)';setTimeout(()=>btn.style.transform='',100);
    if(k==='‚Üê')currentAmount=currentAmount.slice(0,-1);else if(k==='.'&&currentAmount.includes('.'))return;else currentAmount+=k;
    display.textContent=currentAmount?parseFloat(currentAmount).toFixed(2):'0.00';
  });
  document.querySelectorAll('.back-btn').forEach(b=>b.onclick=()=>{body.className='';show('method');});
  confirmBtn.onclick=()=>{
    const a=display.textContent;if(!a||parseFloat(a)<=0)return alert('Enter valid amount');
    localStorage.setItem('justPaid','1');
    window.location.href=handles[currentMethod].url(a);
  };
  document.getElementById('zelle-copy').onclick=()=>{
    navigator.clipboard.writeText(handles.zelle.handle).then(()=>alert('Copied')).catch(()=>alert('Fail'));
  };
  window.addEventListener('load',()=>{
    if(localStorage.getItem('justPaid')){
      localStorage.removeItem('justPaid');
      document.getElementById('success-overlay').classList.add('show');
    }
  });
</script>
</body>
</html>